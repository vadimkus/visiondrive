# 11.3.4 Dubai Pulse parking zones — import + Mapbox overlay

Dubai Pulse datasets can be used for **static** parking zone boundaries + tariffs (not real-time occupancy).

This phase adds:

- Admin API + UI to import **zone GeoJSON** and optional **tariff JSON**
- Map overlay rendering in `/portal/map` for all zone polygons (colored by kind)

## What we store

Database model: `zones`

- `zones.geojson` (GeoJSON)
- `zones.tariff` (JSON, optional)
- `zones.kind` (FREE / PAID / RESIDENT)

## Admin workflow (manual import)

1) Go to:

- `/portal/admin`

2) Under “Parking Zones (GeoJSON import)”:

- Paste GeoJSON (Feature or FeatureCollection)
- Optional: paste tariff JSON
- Click **Import**

This will create/update a zone under the tenant’s first site (until we add a site selector).

## Map workflow (overlay)

1) Go to:

- `/portal/map?zoneId=<zone>`

2) Enable:

- “Zones overlay (paid/free)”

You’ll see all imported zone polygons for that site, colored by `kind`.

## API routes

- `GET /api/portal/admin/zones` (admin only)
  - lists zones and whether geojson/tariff exist
- `POST /api/portal/admin/zones` (admin only)
  - create/update a zone with `{ name, kind, geojson, tariff? }`

Map API (portal):

- `GET /api/portal/map`
  - now returns `overlays.zones` as a FeatureCollection for rendering in Mapbox.

## Notes

- Dubai Pulse datasets are sometimes labeled “Archive/Obsolete”; treat them as a **bootstrap** source.
- Real-time occupancy comes from **our per-bay sensors**, not Dubai Pulse.



